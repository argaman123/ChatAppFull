<div class="container darkMode">
  <mat-card class="form">
    <mat-card-title>Register</mat-card-title>
    <mat-card-content>
      <form class="fields" [formGroup]="form" (ngSubmit)="onSubmit()">
        <mat-form-field class="field">
          <input type="email" matInput placeholder="Email" formControlName="email" email required>
          <mat-error *ngIf="form.get('email')?.errors?.['email']">
            Email is not valid.
          </mat-error>
        </mat-form-field>
        <mat-form-field class="field">
          <input type="text" matInput placeholder="Nickname" formControlName="nickname" required>
          <mat-error *ngIf="form.get('nickname')?.errors?.['maxlength']">
            Nicknames must be shorter than 10 letters.
          </mat-error>
          <mat-error *ngIf="form.get('nickname')?.errors?.['pattern']">
            Nicknames must contain at least one letter, and only English letters are allowed
          </mat-error>
        </mat-form-field>
        <mat-form-field class="field">
          <input type="password" matInput placeholder="Password" formControlName="password" required autocomplete="on">
          <mat-error *ngIf="form.get('password')?.errors?.['minlength'] || form.get('password')?.errors?.['maxlength']">
            Password must have 8 to 20 characters.
          </mat-error>
          <mat-error *ngIf="form.get('password')?.errors?.['pattern']">
            Password must include digits and letters.
          </mat-error>
        </mat-form-field>
        <mat-form-field class="field">
          <mat-label>Confirm password</mat-label>
          <input type="password" matInput required formControlName="confirmedPassword" [errorStateMatcher]="matcher">
          <mat-error *ngIf="form.hasError('notSame')">
            Passwords are not matching.
          </mat-error>
        </mat-form-field>
        <div class="buttons field">
          <div>Premium plan:</div>
          <mat-button-toggle-group formControlName="premiumPlan" aria-label="Premium Plan">
            <mat-button-toggle value="none">None</mat-button-toggle>
            <mat-button-toggle value="one-month">One month</mat-button-toggle>
            <mat-button-toggle value="subscription">Subscription</mat-button-toggle>
          </mat-button-toggle-group>
        </div>
        <mat-error style="white-space: pre-wrap">{{errors}}</mat-error>
        <div class="buttons">
          <a routerLink="/guest" mat-stroked-button>Guest</a>
          <a routerLink="/login" mat-stroked-button>Login</a>
          <button type="submit" mat-raised-button color="primary">Register</button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>
